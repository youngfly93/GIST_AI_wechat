<!--pages/clinical_decision/clinical_decision.wxml-->
<view class="container">
  <view class="form-title">临床辅助决策</view>
  <view class="form-subtitle">输入患者资料获取治疗建议</view>

  <form bindsubmit="onSubmitForm">
    <view class="form-group">
      <view class="form-label">肿瘤位置</view>
      <picker bindchange="bindPickerChange" value="{{tumorLocationIndex}}" range="{{tumorLocationOptions}}" name="tumorLocation">
        <view class="picker">
          {{tumorLocationOptions[tumorLocationIndex] || '请选择肿瘤位置'}}
          <image class="picker-arrow" src="/images/icons/arrow_down.png"></image>
        </view>
      </picker>
    </view>

    <view class="form-group">
      <view class="form-label">肿瘤大小 (cm)</view>
      <input class="form-input" name="tumorSize" type="digit" placeholder="请输入肿瘤大小" value="{{formData.tumorSize}}" bindinput="onInputChange" data-field="tumorSize"></input>
    </view>

    <view class="form-group">
      <view class="form-label">有丝分裂数 (/50HPF)</view>
      <input class="form-input" name="mitoticCount" type="number" placeholder="请输入有丝分裂数" value="{{formData.mitoticCount}}" bindinput="onInputChange" data-field="mitoticCount"></input>
    </view>

    <view class="form-group">
      <view class="form-label">基因突变类型</view>
      <picker bindchange="bindPickerChange" value="{{mutationTypeIndex}}" range="{{mutationTypeOptions}}" name="mutationType" data-field="mutationType">
        <view class="picker">
          {{mutationTypeOptions[mutationTypeIndex] || '请选择基因突变类型'}}
          <image class="picker-arrow" src="/images/icons/arrow_down.png"></image>
        </view>
      </picker>
    </view>

    <view class="form-group">
      <view class="form-label">是否有转移</view>
      <radio-group class="radio-group" bindchange="onRadioChange" name="metastasis" data-field="metastasis">
        <label class="radio-label" wx:for="{{metastasisOptions}}" wx:key="value">
          <radio value="{{item.value}}" checked="{{item.value === formData.metastasis}}"/>{{item.name}}
        </label>
      </radio-group>
    </view>

    <!-- Add more fields as per your detailed requirements -->
    <!-- e.g., Rupture status, specific gene mutations, etc. -->

    <button class="submit-button" form-type="submit" disabled="{{isLoading}}">获取建议</button>
  </form>

  <view wx:if="{{isLoading}}" class="loading-indicator">
    <text>正在分析，请稍候...</text>
  </view>

  <view wx:if="{{recommendationResult}}" class="result-section">
    <view class="result-title">分析结果与建议</view>
    <view class="result-content">
      <text selectable="true">{{recommendationResult}}</text>
    </view>
  </view>

</view>